.. index:: oracle, solaris, ipmp

.. meta::
   :keywords: oracle, solaris, ipmp

.. _oracle-sw-solaris10-ipmp:

Настройка IPMP в Solaris 10
===========================

Настройка
~~~~~~~~~

Создаем файлы ``/etc/hostname.<interface>`` для каждого интерфейса который нужно настроить (включить в IPMP)

.. code-block:: none

   cat /etc/hostname.e1000g0
   172.16.179.142 netmask + broadcast + group ipmp0 -failover deprecated up addif 172.16.179.143 failover netmask + broadcast + up

.. code-block:: none

    cat /etc/hostname.e1000g1
    172.16.179.144 netmask + broadcast + group ipmp0 -failover deprecated standby up


Подробное описание
~~~~~~~~~~~~~~~~~~

А теперь разберем эти записи.

**Какие адреса куда будут назначены?**

  * Адрес 172.16.179.142 будет на физическом интерфесе e1000g0
  * Адрес 172.16.179.143 будет на "плавающем" интерфесе e1000gX:1
  * Адрес 172.16.179.144 будет на физическом интерфесе e1000g1

**Какие флаги и переменные используются?**

  * "netmask +" подставляет нужную маску для сети (маски указываются в /etc/netmasks
  * "broadcast +" подставляет broadcast адрес
  * "group ipmp0" указывается имя группы, в которую объеденяются интерфейсы
  * "-failover" выставляет флаг "NOFAILOVER"[#]_ для интерфейса.
  * "deprecated" выставляет флаг "DEPRECATED"[#]_ для интерфейса.
  * "standby" выставляет флаги "STANDBY, INACTIVE"[#]_ для интерфейса.

-------------

.. [#] Если данный флаг выставлен, то адрес не будет пытаться перетекать на другой интерфейс, а останется у того интерфейса, которому изначально был назначен.
.. [#] Данный флаг говорит приложениям, что этот интерфейс нельзя использовать для исходящих пакетов, если есть другие не-deprecated интерфейсы или в приложении не указано явное использование данного интерфейса.
.. [#] Если выставлен флаг "STANDBY", то интерфейс не используется для исходящих пакетов, за исключением случаев, когда все остальные интерфейсы в группе недоступны и "плавающий" адрес перешел на интерфейс с этим флагом.
