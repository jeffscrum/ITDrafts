.. index:: tourism, osm, turbo

.. meta::
   :keywords: tourism, osm, turbo

.. _tourism:

==========================
Извлечение объектов из OSM
==========================

Для поиска объектов на OSM и дальнейшей их обработки удобно пользоваться Overpass API (http://overpass-turbo.eu).
Результат поиска можно экспортировать в GPX, KML или другие форматы.

Для построения запросов в человекочитаемом варианте удобно использовать Wizard.
После того как я сохраняю результат в GPX мне не нравятся те имена что получают точки вида "node/279107061", поэтому я дополнительно пропускаю файл через скрипт который оставляет в имени только node id.
Далее останется только создать POI файл для навигатора. Как это сделать читать вот в этой статье.

.. code-block:: none

   sed 's/node\///g' export.gpx > export2.gpx

Пример
++++++

Поиск заправок с именем "Газпромнефть" в ЦФО. Результат выводим в сокращенном варианте (координаты и имя).

В Wizard было указано ``"amenity=fuel and name=Газпромнефть and type:node in "Central Federal District""``, после я только изменил вывод результата, так как мне нужен был сокращенный вариант.

.. code-block:: none

   /*
   This has been generated by the overpass-turbo wizard.
   The original search was:
   "amenity=fuel and name=Газпромнефть and type:node in "Central Federal District"
   */
   [out:xml][timeout:25];
   // fetch area "Central Federal District" to search in
   {{geocodeArea:Central Federal District}}->.searchArea;
   // gather results
   (
     // query part for: "amenity=fuel and name="Газпромнефть"
     node["amenity"="fuel"]["name"="Газпромнефть"](area.searchArea);
   );
   // print results
   // Only name and coordinates
   out skel qt;

-----------
Related Links:

* https://wiki.openstreetmap.org/wiki/RU:Overpass_API/Language_Guide
